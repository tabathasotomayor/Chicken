<html>
	<head>
		<link rel="stylesheet" type="css" href="chickenstyle.css">
		<script src="processing-1.4.1.js"></script>
		<script type="text/processing" data-processing-target="mycanvas">
			//this makes our chicken, assumed start position will be(200,200)
			Chicken chic = new Chicken(200,200,5);
			//this makes the first level of the maze
			Maze first = new Maze();
			
			var score =0;
			
			void setup()
			{
			  size(900,600);
			  background(200);
			  fill(200);
			  PFont fontA = loadFont("courier");
			  textFont(fontA, 14);
			}

			void draw(){  
				background(200,255,255);
				chic.draw();
				//See line 167 first. Once we return the list, we have to save it in a variable, and that variable will be the parameters in the checkPosition functions
				var f=first.getFeathers();
				var g=first.getGuards();
				var b=first.getBoxes();
				//inside the drawMaze function is the drawFeathers function and drawGuards function
				first.drawMaze();
				checkGuards(g);
				arrow(keyPressed, keyCode);
				
			}
			function arrow(keyPressed, keyCode){
				if(keyPressed == true){
					console.log(keyCode);
					if (keyCode == 39 && chic.canMove() == true){
					chic.move("right");
					checkPosition(f);
					}
				else if (keyCode == 39 && chic.canMove() == false){
					chic.move("left");
					chic.move("left");
					chic.move("left");
					checkPosition(f);
				} 
				else if(keyCode == 37 && chic.canMove() == true){
					chic.move("left");
				}
				else if(keyCode ==37 && chic.canMove()== false){
					chic.move("right");
					chic.move("right");
					chic.move("right");
				}
				else if(keyCode == 38 && chic.canMove() == true){
					chic.move("up");
				}
				else if (keyCode ==38 && chic.canMove() ==false){
					chic.move("down");
					chic.move("down");
					chic.move("down");	
				}
				else if (keyCode == 40 && chic.canMove() == true){
					chic.move("down");
				}
				else if (keyCode == 40 && chic.canMove() == false){
					chic.move("up");
					chic.move("up");
					chic.move("up");
				}
			  }
				}
				
	//START OF BLOCK CODE
			class Block{
				//attributes
				var r;
				var t;
				var b;
				var l;
				var h;
				var w; 
				var x;
				var y;
				//constructor
				Block(xVal, yVal, height, width){
					x=xVal;
					y=yVal;
					h = height;
					w = width;
				}
				//methods
				void drawB(){
					t = y;
					b = y+ h;
					l = x;
					r = x+w;					
					fill(0,0,0);
					rect(x,y,w,h);
				}
			}
			
//START OF MAZE CODE
			class Maze{
				//attributes
				//list of feathers
				var feathers=[];
				var guards=[];
				var boxes=[];
				
				//constructor, we don't really need anything in the parameters yet
				Maze(){
				//add the feathers here
				feathers.push(new Feathers(100,100,0), new Feathers(250,250,0), new Feathers(300,300,0), new Feathers(400,400,0));
				//add guards here
				guards.push(new Guards(300,500), new Guards(400,900));
				//add boxes here
				boxes.push(new Block(250,250,40,40), new Block(400,400,50,80), new Block(300, 500, 60,20));
				}
				
				//methods
				//draw the maze with feathers and guards and boxes
				void drawMaze(){
					for(var i=0; i<feathers.length();i++){
						feathers[i].drawFeathers();
					}
					for(var j=0; j<guards.length();j++){
						guards[j].drawGuardsUp();
						guards[j].moveGuards();
					}
					for(var a=0;a<boxes.length;a++){
						console.log("hi");
						boxes[a].drawB();
					}
				}
				
				//If we don't use this function, we wouldn't be able to use the "feathers" list outside of the Maze class. This allows us to return the list feathers. See line 25.
				Array getFeathers(){
					return feathers;
				}
				
				Array getGuards(){
					return guards;
				}
				
				Array getBoxes(){
					return boxes;
				}
			}
//END OF MAZE CODE

			
//TABATHA'S CHICKEN CODE STARTS HERE
			class Chicken{
				//attributes
				var x;
				var y;
				var w;
				//constructor
				Chicken(xVal,yVal,width){
					x=xVal;
					y=yVal;
					w=width;
				}
				//methods
				void draw(){
					noStroke();
					fill(100,100,100); //center
					rect(x,y,w,w);
					fill(178, 136, 93);//white
					rect(x+5,y,w,w);
					rect(x-5,y,w,w);
					rect(x,y-5,w,w);
					rect(x,y+5,w,w);
					rect(x+5,y+5,w,w);
					rect(x-5,y+5,w,w);
					rect(x+5,y-5,w,w);
					rect(x-5,y-5,w,w);
					fill(230,138,0);//orange
					rect(x+5,y+10,w,w);	//feet					
					rect(x-5,y+10,w,w);//feet
					fill(178, 136, 93);//white
					rect(x-10,y,w,w);
					rect(x+10,y-5,w,w);				
					rect(x+10,y,w,w);
					rect(x+10,y-10,w,w);
					fill(230,138,0);
					rect(x+15,y-10,w,w);
					fill(178, 136, 93);//white
					rect(x+10,y-15,w,w);
					rect(x+5,y-10,w,w);
					rect(x+5,y-15,w,w);
					fill(0,0,0);
					rect(x+9.5,y-10,2.5,2.5);	
				}
				void move(dir){
					if (dir == "right"){
						x++;
					}
					else if(dir == "left"){
						x--;
					}
					else if(dir == "up"){
						y--;
					}
					else if(dir == "down"){
						y++;
					}
				}
				void canMove(){
					var move = true;	
					for (var i=0; i < boxes.length; i++){
						if (chic.x <boxes[i].R +10&&
							chic.x>boxes[i].L - 10&&
							chic.y >boxes[i].T -10 &&
							chic.y <boxes[i].B +10 ){
								console.log("move is false");
								move = false;
							}
					}
					console.log("something returned");
					return move;
				}
			}
			
			function arrowPress(e){
					console.log(e.keyCode);
			}
//END OF TABATHA'S CHICKEN CODE

//START OF FEATHERS CODE
			class Feathers{
				//attributes
				var x;
				var y;
				var w;
				
				//constructor
				Feathers(xPos,yPos, width){
					x=xPos;
					y=yPos;
					w=width;
				}
				
				//methods
				void drawFeathers(){
					fill(242, 233, 233);
					rect(x+4,y,w-13,13);
					fill(242, 233, 233);
					rect(x+1,y-8,w-18,17);
					fill(242, 233, 233);
					rect(x-4,y-13,w-17,17);
					fill(235, 221, 221);
					rect(x-8,y-18,w-17,16);
					fill(230, 211, 202);
					rect(x-12,y-23,w-17,15);
					fill(214, 197, 145);
					rect(x-16,y-27,w-17,14);
					fill(219, 211, 188);
					rect(x+4,y+13,w+5,6);
				}
			}
//END OF FEATHER CODE


//CHECKING POS AND UPDATING SCORE FUNCTION
			function checkPosition(feathers){
				for (var i=0;i<feathers.length;i++){
					//Basically if the chicken touches the feather
					if ((chic.x > feathers[i].x-37) && (chic.x < feathers[i].x+9 + feathers[i].w) && (chic.y > feathers[i].y - 47) && (chic.y < feathers[i].y + 19)){
						updateScore();
						//move feather off of the screen
						feathers[i].x=-500;
						feathers[i].y=-500;
					}
				}
			}
			
			function updateScore(){
				score++;
				document.getElementById("score").innerHTML = score;
				console.log(score);
			}
//END OF UPDATING SCORE FUNCTION

//HITTING THE GUARD AND RESTARTING POSITION
			function checkGuards(guards){
				for (var j=0;j<guards.length;j++){
					//Basically if the chicken touches the guards
					if((chic.x>guards[j].g-35) && (chic.x<guards[j].g+40) && (chic.y>guards[j].h-47) && (chic.y<guards[j].h+5)){
						//move chicken back to original starting position
						chic.x=200;
						chic.y=200;
					}
				}
			}
//END OF GUARD CHICKEN INTERACTION

//GUARD CODE START
			class Guards{
				//attributes
				var g;
				var h;
				
				//constructor
				Guards(posx,posy){
				g=posx;
				h=posy;
				}
				
				//methods
				void drawGuardsUp(){
					//START OF LIGHT
					fill(255, 243, 13);
					rect(g,h,5,5);
					fill(255, 243, 13);
					rect(g-5,h-5,15,5);
					fill(255, 243, 13);
					rect(g-10,h-12,25,7);
					fill(255, 243, 13);
					rect(g-15,h-19,35,7);
					fill(255, 243, 13);
					rect(g-20,h-26,45,7);
					fill(255, 243, 13);
					rect(g-25,h-33,55,7);
					fill(255, 243, 13);
					rect(g-30,h-40,65,7);
					fill(255, 243, 13);
					rect(g-35,h-47,75,7);
					//END OF LIGHT

					//START OF BODY
					fill(0, 0, 0);
					rect(g-5,h+5,17,20);
					//END OF BODY

					//START OF PERSON
					fill(133, 97, 34);
					rect(g-15,h+35,40,19);
					fill(133, 97, 34);
					rect(g-10,h+28,30,29);
					fill(214, 172, 98);
					rect(g-5,h+25,14,3);
					//END OF PERSON
				}
				
				void drawGuardsDown(){
					//LIGHT
					fill(255, 243, 13);
					rect(a,b,5,5);
					fill(255, 243, 13);
					rect(a-5,b+5,15,5);
					fill(255, 243, 13);
					rect(a-10,b+10,25,7);
					fill(255, 243, 13);
					rect(a-15,b+17,35,7);
					fill(255, 243, 13);
					rect(a-20,b+24,45,7);
					fill(255, 243, 13);
					rect(a-25,b+31,55,7);
					fill(255, 243, 13);
					rect(a-30,b+38,65,7);
					fill(255, 243, 13);
					rect(a-35,b+45,75,7);
					//FLASHLIGHT BODY
					fill(0, 0, 0);
					rect(a-5,b-20,17,20);
					//PERSON
					fill(133, 97, 34);
					rect(a-15,b-49,40,19);
					fill(133, 97, 34);
					rect(a-10,b-52,30,29);
					fill(214, 172, 98);
					rect(a-5,b-23,14,3);
				}
				
				void drawGuardsRight(){
					//LIGHT
					fill(255, 243, 13);
					rect(c,d,5,5);
					fill(255, 243, 13);
					rect(c+5,d-5,5,15);
					fill(255, 243, 13);
					rect(c+10,d-10,7,25);
					fill(255, 243, 13);
					rect(c+17,d-15,7,35);
					fill(255, 243, 13);
					rect(c+24,d-20,7,45);
					fill(255, 243, 13);
					rect(c+29,d-25,7,55);
					fill(255, 243, 13);
					rect(c+36,d-30,7,65);
					fill(255, 243, 13);
					rect(c+43,d-35,7,75);
					//FLASHLIGHT BODY
					fill(0, 0, 0);
					rect(c-20,d-6,20,17);
					//PERSON
					fill(133, 97, 34);
					rect(c-49,d-20,19,40);
					fill(133, 97, 34);
					rect(c-53,d-15,29,30);
					fill(214, 172, 98);
					rect(c-24,d-6,4,14);
				}
				
				void drawGuardsLeft(){
					//LIGHTS
					fill(255, 243, 13);
					rect(e,f,5,5);
					fill(255, 243, 13);
					rect(e-5,f-5,5,15);
					fill(255, 243, 13);
					rect(e-12,f-10,7,25);
					fill(255, 243, 13);
					rect(e-19,f-15,7,35);
					fill(255, 243, 13);
					rect(e-26,f-20,7,45);
					fill(255, 243, 13);
					rect(e-33,f-25,7,55);
					fill(255, 243, 13);
					rect(e-40,f-30,7,65);
					fill(255, 243, 13);
					rect(e-47,f-35,7,75);
					//FLASHLIGHT BODY
					fill(0, 0, 0);
					rect(e+5,f-6,20,17);
					//PERSON
					fill(133, 97, 34);
					rect(e+35,f-16,19,40);
					fill(133, 97, 34);
					rect(e+29,f-11,29,30);
					fill(214, 172, 98);
					rect(e+25,f-6,4,14);
				}
				
				void moveGuards(){
					//move up
					h=h-1;
				}
			}
//END OF GUARD CODE


		</script>
	</head>
	<body>
		<div>Feather Count</div>
		<div id="score">0</div>
		<canvas id="mycanvas"></canvas>
	</body>
</html>