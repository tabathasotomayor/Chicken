<html>
	<head>
		<link rel="stylesheet" type="css" href="chickenstyle.css">
		<script src="processing-1.4.1.js"></script>
		<script type="text/processing" data-processing-target="mycanvas">
			//this makes our chicken, assumed start position will be(200,200)
			Chicken chic = new Chicken(200,200,5);
			//this makes the first level of the maze
			Maze first = new Maze();
			
			var score =0;
			
			void setup()
			{
			  size(900,600);
			  background(200);
			  fill(200);
			  PFont fontA = loadFont("courier");
			  textFont(fontA, 14);
			}

			void draw(){  
				background(200,255,255);
				chic.draw();
				//See line 167 first. Once we return the list, we have to save it in a variable, and that variable will be the parameters in the checkPosition functions
				var f=first.getFeathers();
				var g=first.getGuards();
				//inside the drawMaze function is the drawFeathers function and drawGuards function
				first.drawMaze();
				checkGuards(g);
				if(keyPressed == true){
					console.log(keyCode);
				if (keyCode == 39){
					chic.move("right");
					checkPosition(f);
				}
				else if(keyCode == 37){
					chic.move("left");
					checkPosition(f);
				}
				else if(keyCode == 38){
					chic.move("up");
					checkPosition(f);
				}
				else if (keyCode == 40){
					chic.move("down");
					checkPosition(f);
				}
			  }
			}
			
//TABATHA'S CHICKEN CODE STARTS HERE
			class Chicken{
				//attributes
				var x;
				var y;
				var w;
				//constructor
				Chicken(xVal,yVal,width){
					x=xVal;
					y=yVal;
					w=width;
				}
				//methods
				void draw(){
					noStroke();
					fill(100,100,100); //center
					rect(x,y,w,w);
					fill(178, 136, 93);//white
					rect(x+5,y,w,w);
					rect(x-5,y,w,w);
					rect(x,y-5,w,w);
					rect(x,y+5,w,w);
					rect(x+5,y+5,w,w);
					rect(x-5,y+5,w,w);
					rect(x+5,y-5,w,w);
					rect(x-5,y-5,w,w);
					fill(230,138,0);//orange
					rect(x+5,y+10,w,w);	//feet					
					rect(x-5,y+10,w,w);//feet
					fill(178, 136, 93);//white
					rect(x-10,y,w,w);
					rect(x+10,y-5,w,w);				
					rect(x+10,y,w,w);
					rect(x+10,y-10,w,w);
					fill(230,138,0);
					rect(x+15,y-10,w,w);
					fill(178, 136, 93);//white
					rect(x+10,y-15,w,w);
					rect(x+5,y-10,w,w);
					rect(x+5,y-15,w,w);
					fill(0,0,0);
					rect(x+9.5,y-10,2.5,2.5);	
				}
				void move(dir){
					if (dir == "right"){
						x++;
					}
					else if(dir == "left"){
						x--;
					}
					else if(dir == "up"){
						y--;
					}
					else if(dir == "down"){
						y++;
					}
				}		
			}
			function arrowPress(e){
					console.log(e.keyCode);
			}
//END OF TABATHA'S CHICKEN CODE

//START OF FEATHERS CODE
			class Feathers{
				//attributes
				var x;
				var y;
				var w;
				
				//constructor
				Feathers(xPos,yPos, width){
					x=xPos;
					y=yPos;
					w=width;
				}
				
				//methods
				void drawFeathers(){
					fill(242, 233, 233);
					rect(x+4,y,w-13,13);
					fill(242, 233, 233);
					rect(x+1,y-8,w-18,17);
					fill(242, 233, 233);
					rect(x-4,y-13,w-17,17);
					fill(235, 221, 221);
					rect(x-8,y-18,w-17,16);
					fill(230, 211, 202);
					rect(x-12,y-23,w-17,15);
					fill(214, 197, 145);
					rect(x-16,y-27,w-17,14);
					fill(219, 211, 188);
					rect(x+4,y+13,w+5,6);
				}
			}
//END OF FEATHER CODE

//START OF MAZE CODE
			class Maze{
				//attributes
				//list of feathers
				var feathers=[];
				var guards=[];
				
				//constructor )we don't really need anything in the parameters yet
				Maze(){
				//add the feathers here
				feathers.push(new Feathers(100,100,0), new Feathers(250,250,0), new Feathers(300,300,0), new Feathers(400,400,0));
				
				//add guards here
				guards.push(new Guards(300,500), new Guards(400,900));
				}
				
				//methods
				//draw the maze with feathers
				void drawMaze(){
					for(var i=0; i<feathers.length();i++){
						feathers[i].drawFeathers();
					}
					for(var j=0; j<guards.length();j++){
						guards[j].drawGuards();
						guards[j].moveGuards();
					}
				}
				//If we don't use this function, we wouldn't be able to use the "feathers" list outside of the Maze class. This allows us to return the list feathers. See line 25.
				Array getFeathers(){
					return feathers;
				}
				
				Array getGuards(){
					return guards;
				}
				
				
			}
//END OF MAZE CODE

//CHECKING POS AND UPDATING SCORE FUNCTION
			function checkPosition(feathers){
				for (var i=0;i<feathers.length;i++){
					//Basically if the chicken touches the feather
					if ((chic.x > feathers[i].x-37) && (chic.x < feathers[i].x+9 + feathers[i].w) && (chic.y > feathers[i].y - 47) && (chic.y < feathers[i].y + 19)){
						updateScore();
						//move feather off of the screen
						feathers[i].x=-500;
						feathers[i].y=-500;
					}
				}
			}
			
			function updateScore(){
				score++;
				document.getElementById("score").innerHTML = score;
				console.log(score);
			}
//END OF UPDATING SCORE FUNCTION

//HITTING THE GUARD AND RESTARTING POSITION
			function checkGuards(guards){
				for (var j=0;j<guards.length;j++){
					//Basically if the chicken touches the guards
					if((chic.x>guards[j].g-35) && (chic.x<guards[j].g+40) && (chic.y>guards[j].h-47) && (chic.y<guards[j].h+5)){
						//move chicken back to original starting position
						chic.x=200;
						chic.y=200;
					}
				}
			}
//END OF GUARD CHICKEN INTERACTION

//GUARD CODE START
			class Guards{
				//attributes
				var g;
				var h;
				
				//constructor
				Guards(posx,posy){
				g=posx;
				h=posy;
				}
				
				//methods
				void drawGuards(){
					//START OF LIGHT
					fill(255, 243, 13);
					rect(g,h,5,5);
					fill(255, 243, 13);
					rect(g-5,h-5,15,5);
					fill(255, 243, 13);
					rect(g-10,h-12,25,7);
					fill(255, 243, 13);
					rect(g-15,h-19,35,7);
					fill(255, 243, 13);
					rect(g-20,h-26,45,7);
					fill(255, 243, 13);
					rect(g-25,h-33,55,7);
					fill(255, 243, 13);
					rect(g-30,h-40,65,7);
					fill(255, 243, 13);
					rect(g-35,h-47,75,7);
					//END OF LIGHT

					//START OF BODY
					fill(0, 0, 0);
					rect(g-5,h+5,17,20);
					//END OF BODY

					//START OF PERSON
					fill(133, 97, 34);
					rect(g-15,h+35,40,19);
					fill(133, 97, 34);
					rect(g-10,h+28,30,29);
					fill(214, 172, 98);
					rect(g-5,h+25,14,3);
					//END OF PERSON
				}
				
				void moveGuards(){
					//move up
					h=h-1;
				}
			}
//END OF GUARD CODE
		
		</script>
	</head>
	<body>
		<div>Feather Count</div>
		<div id="score">0</div>
		<canvas id="mycanvas"></canvas>
	</body>
</html>